#summary How to create a new site file.

= Based on gelbooru, danbooru or shimmie =

To add an imageboard/booru:
  # Start the program.
  # Click on the "Sources" button at the bottom of the window ("Explore" tab).
  # Click on the "Add" button at the bottom of the window that just popped up.
  # Fill the Url field, and leave "Guess" checked.
  # If an error occurs, uncheck "Guess", and choose an imageboard in the list.
_*Note that shimmie-based boorus will give random results when downloading multiple images from them!*_


= Add a site type =

*NOT UP TO DATE! Instead, copy the current model.xml files from "%USERPROFILE%/Grabber/sites"*
If your site is not based on danbooru/gelbooru/shimmie, it gets more complicated. *You must have a minimal knowledge of XML and regex to make your own one.* Here is an example of file you'll have to create (it is the danbooru's file):
{{{
<?xml version="1.0" encoding="utf-8" ?>
<Site>
	<Name>Danbooru</Name>
	<Urls>
		<Xml>
			<Tags>/post/index.xml?login={pseudo}&amp;password_hash={password}&amp;limit={limit}&amp;page={page}&amp;tags={tags}</Tags>
		</Xml>
		<Json>
			<Tags>/post/index.json?login={pseudo}&amp;password_hash={password}&amp;limit={limit}&amp;page={page}&amp;tags={tags}</Tags>
		</Json>
		<Html>
			<Post>/post/show/{id}</Post>
		</Html>
	</Urls>
	<Regex>
		<Tags>&lt;li class=&quot;tag-type-(.+)&quot;&gt;.*&lt;a href=&quot;.+&quot;&gt;.*&lt;/a&gt;.*&lt;a href=&quot;.+&quot;&gt;(.+)&lt;/a&gt;.*&lt;/li&gt;</Tags>
		<Image>&lt;span class=&quot;.*&quot; id=&quot;p(\d*)&quot;&gt;.*&lt;a .*&gt;.*(&lt;img[ ]+class=&quot;.*&quot; src=&quot;(http://danbooru.donmai.us/data/preview/(.*).jpg)&quot; title=&quot;(.+) rating:(.*) score:(.*) user:(.*)&quot; alt=&quot;.*&quot; width=.* height=.*&gt;).*&lt;/a&gt;.*&lt;/span&gt;</Image>
		<Order>id|image|preview_url|md5|tags|rating|score|user</Order>
		<LastPage>&lt;link href=&quot;/post\?limit=\d*&amp;page=(\d*)&amp;tags=[^&quot;]*&quot; rel=&quot;last&quot; title=&quot;Last Page&quot;&gt;</LastPage>
	</Regex>
	<FirstPage>1</FirstPage>
</Site>
}}}
Let's explain it in detail.
  * Name: the name that will be shown in the sources window.
  * Urls: the pages urls. You must set at least Html/Post and either Xml or Json. They must start with a slash.
   * Xml: url to the site's XML API. You can use {pseudo}, {password}, {limit}, {page} and {tags}.
   * Json: same as Xml, but for JSON API.
   * Html
    * Post: url of an image's details. You can use {id}.
  * Regex: even when using xml/json, some regex must be used
   * Tags: regex that must return a list of tags from the Html/Post url. Must capture tag's type and tag (in this order).
   * Image: regex that must return a list of iamges from the Html/Post url. Must capture id and preview_url, but can capture md5, tags, rating, score and user (any order, see below).
   * Order: capture order, separated with a "|". For example "id|preview_url" means that the first captured text in the Image regex will be id, and the second one the preview image's url.
   * Last page: regex that must return the last page, if XML API don't give it. Must only capture page number.
  * First page: the number of the first page, usually 1 (but, for example, gelbooru starts with 0).
Then, save it to "%USERPROFILE%/Grabber/sites/your_site_here/model.xml". You should also put in this directory an icon.png file, which is the 16x16 image that will be displayed in the sources window.